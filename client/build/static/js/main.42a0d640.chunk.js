(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,a){e.exports=a(249)},128:function(e,t,a){},152:function(e,t){},154:function(e,t){},192:function(e,t){},193:function(e,t){},249:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(27),l=a.n(o),r=(a(128),a(17)),s=a(20),i=a(42),m=a.n(i);function u(e,t){var a,n;console.log(e),a="token",n=e.data.token,"undefined"!==window&&m.a.set(a,n,{expires:1}),function(e,t){"undefined"!==window&&localStorage.setItem(e,JSON.stringify(t))}("user",e.data.user),t()}function p(){if("undefined"!==window&&function(e,t){if("undefined"!==window)return m.a.get(e)}("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))}function d(e){var t;t="token","undefined"!==window&&m.a.remove(t,{expires:1}),function(e){"undefined"!==window&&localStorage.removeItem(e)}("user"),e()}var f=Object(s.g)((function(e){var t=e.children,a=e.history;return c.a.createElement("div",null,c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"header_items"},c.a.createElement(r.b,{className:"heading",to:"/"},"task.ist"),c.a.createElement("ul",{className:"list"},!p()&&c.a.createElement(c.a.Fragment,null,c.a.createElement(r.c,{style:{color:"#fff"},activeStyle:{color:"#ff0",fontWeight:"bold"},to:"/signup"},c.a.createElement("li",{className:"login_button"},"Signup")),c.a.createElement(r.c,{style:{color:"#fff"},activeStyle:{color:"#ff0",fontWeight:"bold"},to:"/signin"},c.a.createElement("li",{className:"login_button"},"Signin"))),p()&&"admin"===p().role&&c.a.createElement(r.c,{style:{color:"#fff"},activeStyle:{color:"#ff0",fontWeight:"bold"},to:"/admin"},c.a.createElement("li",{className:"login_button"},p().name)),p()&&"subscriber"===p().role&&c.a.createElement(r.c,{style:{color:"#fff"},activeStyle:{color:"#ff0",fontWeight:"bold"},to:"/private"},c.a.createElement("li",{className:"login_button"},p().name)),p()&&c.a.createElement("li",{className:"login_button",style:{backgroundColor:"indianred",cursor:"pointer",border:"1px solid indianred"}},c.a.createElement("span",{style:{color:"#fff",cursor:"pointer"},onClick:function(){return d((function(){return a.push("/")}))}},"Signout")))),c.a.createElement("div",{className:"divider"},c.a.createElement("div",{className:"dark"}),c.a.createElement("div",{className:"light"}))),c.a.createElement("div",{className:"App"},t)))})),g=function(){return c.a.createElement("div",{className:"App_copy"},"Landing page when user not logged in")},E=a(4),h=a(7),b=a.n(h),v=function(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(""),r=Object(E.a)(l,2),s=r[0],i=r[1],m=Object(n.useState)(""),u=Object(E.a)(m,2),p=u[0],d=u[1];return c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"App_heading"},"Signup"),c.a.createElement("form",{className:"App_form"},c.a.createElement("div",{className:"App-form_group"},c.a.createElement("label",{className:"App_copy"},"Name"),c.a.createElement("input",{type:"text",className:"App_input",name:"email",value:a,onChange:function(e){return o(e.target.value)}})),c.a.createElement("div",{className:"App-form_group"},c.a.createElement("label",{className:"App_copy"},"Email"),c.a.createElement("input",{type:"email",className:"App_input",name:"email",value:s,onChange:function(e){return i(e.target.value)}})),c.a.createElement("div",{className:"App-form_group"},c.a.createElement("label",{className:"App_copy"},"Password"),c.a.createElement("input",{type:"text",className:"App_input",name:"email",value:p,onChange:function(e){return d(e.target.value)}})),c.a.createElement("button",{className:"App_form_button _submit",onClick:function(e){e.preventDefault(),b()({method:"POST",url:"http://localhost:8000/api/signup",data:{name:a,email:s,password:p}}).then((function(e){console.log("SIGNUP SUCCESS",e.data.message),o(""),i(""),d("")})).catch((function(e){console.log("SIGNUP ERROR",e)}))},style:{fontWeight:400}},"Submit")))},N=a(119),O=a.n(N),S="http://localhost:8000/api",_="1003752945636-j2lof1bkt1hev86pgp2rgl2693pu4vt2.apps.googleusercontent.com",A="669178937168350",k=function(e){var t=e.informParent,a=void 0===t?function(e){return e}:t;function n(e){b()({method:"POST",url:"".concat(S,"/google-login"),data:{idToken:e.tokenId}}).then((function(e){a(e)})).catch((function(e){console.log("GOOGLE SIGNIN FAILURE",e)}))}return c.a.createElement("div",null,c.a.createElement(O.a,{clientId:_,buttonText:"Login with Google",onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin"}))},w=a(120),y=a.n(w),I=function(e){var t=e.informParent,a=void 0===t?function(e){return e}:t;return c.a.createElement("div",null,c.a.createElement(y.a,{appId:A,autoLoad:!1,fields:"name,email,picture",callback:function(e){b()({method:"POST",url:"".concat(S,"/facebook-login"),data:{userID:e.userID,accessToken:e.accessToken}}).then((function(e){a(e)})).catch((function(e){console.log("FACEBOOK SIGNIN FAILURE",e)}))},render:function(e){return c.a.createElement("button",{onClick:e.onClick,disabled:e.disabled,className:"App_form_oauth_button"},c.a.createElement("i",{className:"fab fa-facebook-f"}),"Login with Facebook")}}))},j=function(e){var t=e.history,a=Object(n.useState)(""),o=Object(E.a)(a,2),l=o[0],i=o[1],m=Object(n.useState)(""),d=Object(E.a)(m,2),f=d[0],g=d[1];function h(e){u(e,(function(){t.push("/private")}))}return c.a.createElement("div",{className:"App"},p()?c.a.createElement(s.a,{to:"/"}):null,c.a.createElement("h1",{className:"App_heading"},"Signin"),c.a.createElement("form",{className:"App_form"},c.a.createElement("div",{className:"App_form_login_group"},c.a.createElement(k,{informParent:h}),c.a.createElement(I,{informParent:h})),c.a.createElement("div",{className:"App_form_group"},c.a.createElement("label",{className:"App_copy"},"Email"),c.a.createElement("input",{type:"email",className:"App_input",name:"email",value:l,onChange:function(e){return i(e.target.value)}})),c.a.createElement("div",{className:"App_form_group"},c.a.createElement("label",{className:"App_copy"},"Password"),c.a.createElement("input",{type:"text",className:"App_input",name:"email",value:f,onChange:function(e){return g(e.target.value)}})),c.a.createElement("button",{className:"App_form_button _submit",onClick:function(e){e.preventDefault(),b()({method:"POST",url:"".concat(S,"/signin"),data:{email:l,password:f}}).then((function(e){console.log("SIGNIN SUCCESS","Welcome ".concat(e.data.user.name)),u(e,(function(){i(""),g(""),t.push("/private")}))})).catch((function(e){console.log("SIGNUP ERROR",e)}))},style:{fontWeight:400}},"Submit"),c.a.createElement(r.b,{to:"/auth/password/forgot",className:"App_form_button _no_value"},"Forgot Password")))},C=a(121),T=a.n(C);function x(e){var t=e.match,a=Object(n.useState)(""),o=Object(E.a)(a,2),l=o[0],r=o[1],s=Object(n.useState)(""),i=Object(E.a)(s,2),m=i[0],u=i[1];return Object(n.useEffect)((function(){var e=t.params.token,a=T.a.decode(e).name;e&&(r(a),u(e))}),[t.params.token,m]),c.a.createElement("div",{className:"col-md-6 offset-md-3 text-center"},c.a.createElement("h1",{className:"p-5 text-center"},"Activate your account, ",l,"."),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-outline-primary",onClick:function(e){e.preventDefault(),b()({method:"POST",url:"http://localhost:8000/api/account-activation",data:{token:m}}).then((function(e){console.log("ACCOUNT ACTIVATION",e.data.message)})).catch((function(e){console.log("ACCOUNT ACTIVATION ERROR",e.response.data.message)}))}},"Activate account")))}var R=a(122),P=a.n(R),U=function(e){e.style;var t=e.fill,a=void 0===t?"#737983":t,n=e.width,o=void 0===n?"100%":n,l=e.height,r=void 0===l?"100%":l,s=e.viewBox,i=void 0===s?"0 0 10 10":s;return c.a.createElement("svg",{width:o,height:r,viewBox:i,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},c.a.createElement("path",{className:"st0",d:"M0,5.3l0-0.6c0-0.2,0.1-0.3,0.3-0.3h9.4c0.2,0,0.3,0.1,0.3,0.3v0.6c0,0.2-0.1,0.3-0.3,0.3H0.3\r C0.1,5.6,0,5.5,0,5.3z",fill:a}),c.a.createElement("path",{className:"st0",d:"M5.3,10H4.7c-0.2,0-0.3-0.1-0.3-0.3V0.3C4.4,0.1,4.5,0,4.7,0l0.6,0c0.2,0,0.3,0.1,0.3,0.3v9.4\r C5.6,9.9,5.5,10,5.3,10z",fill:a}))};function D(){var e=new Date;return{day:e.getDate().toString().length<=1?"0"+e.getDate():e.getDate(),month:e.getMonth().toString().length<=1?"0".concat(parseInt(e.getMonth()+1)):e.getMonth(),year:e.getFullYear().toString().length<=1?"0"+e.getFullYear():e.getFullYear(),hours:e.getHours().toString().length<=1?"0"+e.getHours():e.getHours(),minutes:e.getMinutes().toString().length<=1?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds().toString().length<=1?"0"+e.getSeconds():e.getSeconds()}}var F=function(e){var t=e.load,a=e.setLoad,o=e.currentTask,l=e.setCurrentTask,r=e.setIsAddingOrIsUpdating,s=Object(n.useState)(""),i=Object(E.a)(s,2),m=i[0],u=i[1],p=JSON.parse(localStorage.getItem("user"));return Object(n.useEffect)((function(){return o.text?u(o.text):u("")}),[o,u]),c.a.createElement("form",{className:"App_form",onSubmit:function(e){e.preventDefault(),o.text?(b.a.put("http://localhost:8000/api/update-task/".concat(o._id),{text:m}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),u(""),a(!t),l({}),r(!1)):(b.a.post("http://localhost:8000/api/create-task",{text:m,createdDateAndTime:{date:"".concat(D().day,"/").concat(D().month,"/").concat(D().year),time:"".concat(D().hours,":").concat(D().minutes,":").concat(D().seconds)},creator:p._id}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),u(""),a(!t),r(!1))},style:{flexDirection:"row"}},c.a.createElement("input",{type:"text",className:"App_input",placeholder:"Type Task",value:m,onChange:function(e){return u(e.target.value)}}),c.a.createElement("button",{className:""===m?"App_form_button _no_value":"App_form_button _submit",type:"submit",style:{padding:0,margin:0,fontWeight:400}},o.text?"Update":"Submit"))},L=a(34),W=Object(L.c)((function(){return c.a.createElement("span",null,"::")})),G=Object(L.b)((function(e){e.load;var t=e.setLoad,a=e.task,n=e.sortedTasks,o=e.setCurrentTask,l=e.setIsAddingOrIsUpdating;return c.a.createElement("li",{className:"App_list_item"},c.a.createElement("div",{className:"dragHelper"},c.a.createElement("div",{className:"main"},c.a.createElement(W,null),c.a.createElement("div",{className:"task-group"},c.a.createElement("input",{type:"checkbox",checked:a.completed,onChange:function(){}}),c.a.createElement("p",{className:"App_copy ".concat(a.completed&&"lineThrough")},a.text)),c.a.createElement("ul",{className:"menu"},!a.completed&&c.a.createElement("li",{className:"menu-item"},c.a.createElement("i",{className:"fas fa-edit",onClick:function(){o(a),l(!0),t(!0)}})),c.a.createElement("li",{className:"menu-item"},c.a.createElement("i",{className:"fas fa-trash",onClick:function(){var e;e=a._id,b.a.delete("http://localhost:8000/api/delete-task/".concat(e)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),t(!0)}})))),a.completed?null:c.a.createElement("div",{className:"status-bar"},c.a.createElement("div",{className:"timestamp-created"},c.a.createElement("p",null,"created on",c.a.createElement("span",null," ",a.createdDateAndTime.date," ")," at",c.a.createElement("span",null," ",a.createdDateAndTime.time)))),n.indexOf(a)<n.length-1&&c.a.createElement("div",{className:"divider"},c.a.createElement("div",{className:"dark"}),c.a.createElement("div",{className:"light"}))))})),M=Object(L.a)((function(e){var t=e.load,a=e.setLoad,n=e.sortedTasks,o=e.setCurrentTask,l=e.setIsAddingOrIsUpdating,r=JSON.parse(localStorage.getItem("user"));return c.a.createElement("ul",{className:"App_list"},n.map((function(e,s){return e.creator===r._id?c.a.createElement(G,{key:"task-".concat(e.text),index:s,task:e,load:t,setLoad:a,sortedTasks:n,setCurrentTask:o,setIsAddingOrIsUpdating:l}):null})))})),H=function(){var e=Object(n.useState)({}),t=Object(E.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(!1),r=Object(E.a)(l,2),s=r[0],i=r[1],m=Object(n.useState)([]),u=Object(E.a)(m,2),p=u[0],d=u[1],f=Object(n.useState)(!1),g=Object(E.a)(f,2),h=g[0],v=g[1];return Object(n.useEffect)((function(){b.a.get("http://localhost:8000/api/all-tasks").then((function(e){return d(e.data)})).catch((function(e){return console.log(e)})),v(!0)}),[h,d]),c.a.createElement("div",{className:"App"},s?c.a.createElement(F,{load:h,setLoad:v,currentTask:a,setCurrentTask:o,isAddingOrIsUpdating:s,setIsAddingOrIsUpdating:i}):c.a.createElement("div",{className:"App_add_task",onClick:function(){return i(!0)}},c.a.createElement(U,{width:25}),c.a.createElement("p",{className:"App_copy"},"New Task")),c.a.createElement(M,{axis:"y",lockAxis:"y",useDragHandle:!0,sortedTasks:p,load:h,setLoad:v,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;d(P()(p,t,a))},setCurrentTask:o,isAddingOrIsUpdating:s,setIsAddingOrIsUpdating:i}))},J=function(){var e=Object(n.useState)(""),t=Object(E.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)("Request password reset link"),r=Object(E.a)(l,2),s=r[0],i=r[1];return c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"App_heading"},"Forgot Password"),c.a.createElement("form",{className:"App_form",onSubmit:function(e){e.preventDefault(),b()({method:"PUT",url:"".concat(S,"/forgot-password"),data:{email:a}}).then((function(e){console.log("FORGOT PASSWORD SUCCESS"),i("Requested"),o("")})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e),i("Request password reset link")}))}},c.a.createElement("div",{className:"App-form_group"},c.a.createElement("label",{className:"App_copy"},"Email"),c.a.createElement("input",{type:"email",className:"App_input",name:"email",value:a,onChange:function(e){return o(e.target.value)}})),c.a.createElement("button",{className:"App_form_button _submit",style:{fontWeight:400}},s)))},q=function(e){var t=e.match,a=Object(n.useState)(""),o=Object(E.a)(a,2),l=o[0],r=o[1],s=Object(n.useState)(""),i=Object(E.a)(s,2),m=i[0],u=i[1],p=Object(n.useState)("Reset password"),d=Object(E.a)(p,2),f=d[0],g=d[1];return Object(n.useEffect)((function(){var e=t.params.token;e&&r(e)}),[t.params.token]),c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"App_heading"},"Reset Password"),c.a.createElement("form",{className:"App_form",onSubmit:function(e){e.preventDefault(),b()({method:"PUT",url:"".concat(S,"/reset-password"),data:{newPassword:m,resetPasswordLink:l}}).then((function(e){console.log("FORGOT PASSWORD SUCCESS"),g("Reseted")})).catch((function(e){console.log("FORGOT PASSWORD ERROR",e)}))}},c.a.createElement("div",{className:"App-form_group"},c.a.createElement("label",{className:"App_copy"},"Email"),c.a.createElement("input",{type:"password",className:"App_input",name:"password",value:m,onChange:function(e){return u(e.target.value)},placeholder:"Type new password",required:!0})),c.a.createElement("button",{className:"App_form_button _submit",style:{fontWeight:400}},f)))};var B=document.getElementById("root");l.a.render(c.a.createElement((function(){return c.a.createElement(r.a,null,c.a.createElement(f,null,c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/",component:g}),c.a.createElement(s.b,{path:"/signup",component:v}),c.a.createElement(s.b,{path:"/signin",component:j}),c.a.createElement(s.b,{exact:!0,path:"/auth/activate/:token",component:x}),c.a.createElement(s.b,{exact:!0,path:"/private",component:H}),c.a.createElement(s.b,{exact:!0,path:"/auth/password/forgot",component:J}),c.a.createElement(s.b,{exact:!0,path:"/auth/password/reset/:token",component:q}))))}),null),B)}},[[123,1,2]]]);
//# sourceMappingURL=main.42a0d640.chunk.js.map